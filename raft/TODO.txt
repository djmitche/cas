## Doc

* doc deviations from paper
  * AppendEntriesRep contains info implicitly in the context of the RPC (next_index)

## Misc

* Handle message ser/de somewhere better
* Parameterize better on item.. (currently char)
* log.last_entry(), log.next_index() instead of .len? (and move all usize <-> u64 in there)

## Server

* Be smarter about heartbeat timings (use randomization)
* don't replicate all that ServerState nonsense - just use a sub-struct
* utility function for getting last index / term, with defaults for 0
* consider building a big state machine:
  - method per event (message, control, timer)
  - ServerState as input
  - ServerState + action (messages to send, timers to set/clear) as output
  - *way* more testable
  - could encapsulate with a trait allowing mock actions

## crate::net::tcp

* Expire outgoing messages if not sent in 500 ms or whatever
* Write messages while still monitoring for stopping
* use either net2 or nix, not both
* Figure out how to do a nonblocking connect with a socket from net2
* Make the wait state back off up to 1000ms or something
